<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {{ page.title }}{% if page.title != site.title %} - {{ site.title }}{%
      endif %}
    </title>
    <meta
      name="description"
      content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}"
    />
    <meta
      name="keywords"
      content="{% if page.keywords %}{{ page.keywords }}{% else %}{{ site.keywords }}{% endif %}"
    />
    <meta name="author" content="{{ site.author }}" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:site_name" content="{{ site.title }}" />
    <meta
      property="og:title"
      content="{{ page.title }}{% if page.title != site.title %} - {{ site.title }}{% endif %}"
    />
    <meta
      property="og:description"
      content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
    <meta
      property="og:image"
      content="{{ site.url }}/assets/images/app-screenshot.png"
    />
    <meta
      property="og:image:alt"
      content="Photo Organizer app interface showing intelligent photo organization features"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@{{ site.social.twitter }}" />
    <meta name="twitter:creator" content="@{{ site.social.twitter }}" />
    <meta
      name="twitter:title"
      content="{{ page.title }}{% if page.title != site.title %} - {{ site.title }}{% endif %}"
    />
    <meta
      name="twitter:description"
      content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}"
    />
    <meta
      name="twitter:image"
      content="{{ site.url }}/assets/images/app-screenshot.png"
    />
    <meta
      name="twitter:image:alt"
      content="Photo Organizer app interface showing intelligent photo organization features"
    />

    <meta name="application-name" content="{{ site.title }}" />
    <meta name="msapplication-TileColor" content="{{ site.pwa.theme_color }}" />
    <meta name="theme-color" content="{{ site.pwa.theme_color }}" />

    <!-- Structured Data for Application -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Photo Organizer",
        "description": "{{ site.description }}",
        "applicationCategory": "MultimediaApplication",
        "operatingSystem": ["macOS 10.15+", "Windows 10", "Windows 11"],
        "offers": {
          "@type": "Offer",
          "price": "19.99",
          "priceCurrency": "EUR",
          "category": "purchase"
        },
        "downloadUrl": [
          "https://apps.apple.com/us/app/flipfocus-photo-organizer/id6743702259",
          "https://apps.microsoft.com/detail/9N0T4WCLMJ63"
        ],
        "softwareVersion": "1.0",
        "datePublished": "2025-01-01",
        "author": {
          "@type": "Person",
          "name": "{{ site.author }}",
          "affiliation": {
            "@type": "Organization",
            "name": "Mcvanhassel Web Development",
            "url": "https://mcvanhassel.com"
          }
        },
        "publisher": {
          "@type": "Organization",
          "name": "Mcvanhassel Web Development",
          "url": "https://mcvanhassel.com"
        },
        "screenshot": "{{ site.url }}/assets/images/app-screenshot.png",
        "featureList": [
          "Automatic photo and video sorting",
          "Intelligent duplicate detection",
          "EXIF data extraction and organization",
          "Privacy-focused offline operation",
          "Customizable organization structure",
          "Cross-platform support"
        ],
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "reviewCount": "127"
        }
      }
    </script>

    <!-- FAQ Structured Data for Featured Snippets -->
    {% if page.url == "/" or page.url == "/index.html" %}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "How does Photo Organizer protect my privacy?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Photo Organizer operates 100% offline. All file processing happens locally on your device, and your photos never leave your computer. We don't collect any personal data or usage analytics."
            }
          },
          {
            "@type": "Question",
            "name": "What file formats are supported?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Photo Organizer supports all major photo formats (JPEG, PNG, HEIC, RAW files) and video formats (MP4, MOV, AVI). The app reads EXIF metadata to intelligently organize your files."
            }
          },
          {
            "@type": "Question",
            "name": "Can I undo organization changes?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Yes! Photo Organizer offers both copy and move modes. We recommend using copy mode first to test the organization structure before committing to moving files."
            }
          },
          {
            "@type": "Question",
            "name": "How does duplicate detection work?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "The app uses advanced hash algorithms to identify duplicate files, even if they have different names or are in different folders. You can choose to keep, delete, or move duplicates."
            }
          },
          {
            "@type": "Question",
            "name": "Is there a limit to how many photos I can organize?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "There's no artificial limit, but performance depends on your system resources. For optimal performance, we recommend processing fewer than 5,000 files at once for large collections."
            }
          }
        ]
      }
    </script>
    {% endif %}

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ site.url }}{{ page.url }}" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/favicon/favicon32.png"
    />
    <link rel="manifest" href="/assets/favicon/site.webmanifest" />

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Stylesheets -->
    <link
      rel="stylesheet"
      href="{{ '/assets/css/style.css' | relative_url }}"
    />

    <!-- Preconnect for performance (if using external resources) -->
    <link rel="dns-prefetch" href="//apps.apple.com" />
    <link rel="dns-prefetch" href="//apps.microsoft.com" />
    <link rel="dns-prefetch" href="//github.com" />

    <!-- Jekyll SEO Tag -->
    {% seo %}
    <!-- Google Analytics (conditionally loaded) -->
    <script>
      // GDPR Consent Management
      window.cookieConsent = {
        hasConsent: function () {
          return localStorage.getItem("ga-consent") === "granted";
        },

        setConsent: function (granted) {
          localStorage.setItem("ga-consent", granted ? "granted" : "denied");
          if (granted) {
            this.loadGoogleAnalytics();
          }
        },

        loadGoogleAnalytics: function () {
          if (this.hasConsent() && !window.gtag) {
            // Load Google Analytics
            var script = document.createElement("script");
            script.async = true;
            script.src =
              "https://www.googletagmanager.com/gtag/js?id=G-4E22ELCWM8";
            document.head.appendChild(script);

            script.onload = function () {
              window.dataLayer = window.dataLayer || [];
              function gtag() {
                dataLayer.push(arguments);
              }
              window.gtag = gtag;
              gtag("js", new Date());

              // Google Analytics Enhanced Configuration
              gtag("config", "G-4E22ELCWM8", {
                anonymize_ip: true,
                cookie_flags: "secure;samesite=strict",
                send_page_view: true,
                // Enhanced eCommerce for app downloads
                custom_map: {
                  custom_parameter_1: "app_platform",
                  custom_parameter_2: "download_source",
                },
              });
            };
          }
        },
      };

      // Load GA if consent already given
      if (window.cookieConsent.hasConsent()) {
        window.cookieConsent.loadGoogleAnalytics();
      }
    </script>

    <!-- Google Analytics Enhanced Event Tracking -->
    <script>
      // Enhanced GA4 Event Tracking
      function trackEvent(eventName, parameters) {
        if (typeof gtag !== "undefined" && window.cookieConsent.hasConsent()) {
          gtag("event", eventName, parameters);
        }
      }

      // Wait for DOM to be ready
      document.addEventListener("DOMContentLoaded", function () {
        // Track App Store downloads (Primary Goal)
        const appStoreLinks = document.querySelectorAll(
          'a[href*="apps.apple.com"], a[href*="apps.microsoft.com"]'
        );
        appStoreLinks.forEach(function (link) {
          link.addEventListener("click", function () {
            const platform = link.href.includes("apple.com")
              ? "mac"
              : "windows";
            const store = link.href.includes("apple.com")
              ? "Mac App Store"
              : "Microsoft Store";

            // Primary conversion event for GA4
            trackEvent("purchase_intent", {
              event_category: "App Download",
              event_label: store,
              value: 19.99,
              currency: "EUR",
              platform: platform,
              source: "website",
            });

            // Additional specific tracking
            trackEvent("app_store_click", {
              platform: platform,
              store: store,
              price: 19.99,
              currency: "EUR",
            });
          });
        });

        // Track contact form submissions
        const contactForm = document.querySelector('form[action*="formspree"]');
        if (contactForm) {
          contactForm.addEventListener("submit", function () {
            trackEvent("generate_lead", {
              event_category: "Contact",
              event_label: "Contact Form Submission",
              lead_type: "contact_form",
            });
          });
        }

        // Track feature interest (pricing button clicks)
        const pricingButtons = document.querySelectorAll('a[href*="#pricing"]');
        pricingButtons.forEach(function (button) {
          button.addEventListener("click", function () {
            trackEvent("view_pricing", {
              event_category: "Interest",
              event_label: "Pricing Section View",
            });
          });
        });

        // Track demo/screenshot interest
        const screenshots = document.querySelectorAll(
          ".screenshot-gallery img"
        );
        screenshots.forEach(function (img, index) {
          img.addEventListener("click", function () {
            trackEvent("view_demo", {
              event_category: "Engagement",
              event_label: "Screenshot View",
              screenshot_number: index + 1,
            });
          });
        });

        // Enhanced engagement tracking
        let scrolled25 = false;
        let scrolled50 = false;
        let scrolled75 = false;
        let timeOnPage30s = false;
        let timeOnPage2m = false;
        let timeOnPage5m = false;

        // Multi-level scroll tracking
        window.addEventListener("scroll", function () {
          const scrollPercent =
            (window.scrollY /
              (document.body.scrollHeight - window.innerHeight)) *
            100;

          if (!scrolled25 && scrollPercent >= 25) {
            scrolled25 = true;
            trackEvent("scroll", {
              event_category: "Engagement",
              event_label: "25% Scroll Depth",
            });
          }

          if (!scrolled50 && scrollPercent >= 50) {
            scrolled50 = true;
            trackEvent("scroll", {
              event_category: "Engagement",
              event_label: "50% Scroll Depth",
            });
          }

          if (!scrolled75 && scrollPercent >= 75) {
            scrolled75 = true;
            trackEvent("scroll", {
              event_category: "Engagement",
              event_label: "75% Scroll Depth",
            });
          }
        });

        // Time on page tracking
        setTimeout(function () {
          if (!timeOnPage30s) {
            timeOnPage30s = true;
            trackEvent("timing_complete", {
              event_category: "Engagement",
              event_label: "30 Seconds on Page",
            });
          }
        }, 30000);

        setTimeout(function () {
          if (!timeOnPage2m) {
            timeOnPage2m = true;
            trackEvent("timing_complete", {
              event_category: "Engagement",
              event_label: "2 Minutes on Page",
            });
          }
        }, 120000);

        setTimeout(function () {
          if (!timeOnPage5m) {
            timeOnPage5m = true;
            trackEvent("timing_complete", {
              event_category: "Engagement",
              event_label: "5 Minutes on Page",
            });
          }
        }, 300000);

        // Track external link clicks
        const externalLinks = document.querySelectorAll(
          'a[href^="http"]:not([href*="organizer.flipfocus.nl"])'
        );
        externalLinks.forEach(function (link) {
          link.addEventListener("click", function () {
            trackEvent("click", {
              event_category: "External Link",
              event_label: link.href,
              outbound: true,
            });
          });
        });

        // Track navigation usage
        const navLinks = document.querySelectorAll("nav a");
        navLinks.forEach(function (link) {
          link.addEventListener("click", function () {
            trackEvent("navigate", {
              event_category: "Navigation",
              event_label: link.textContent.trim(),
            });
          });
        });
      });
    </script>

    <!-- Cookie Banner Overlay Styles -->
    <style>
      /* Cookie Banner Overlay */
      .cookie-banner-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease-in-out;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }

      .cookie-banner-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .cookie-banner-backdrop {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(4px);
      }

      .cookie-banner-modal {
        position: relative;
        background: white;
        border-radius: 1rem;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        max-width: 28rem;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        transform: scale(0.95);
        transition: transform 0.3s ease-in-out;
      }

      .cookie-banner-overlay.show .cookie-banner-modal {
        transform: scale(1);
      }

      .cookie-banner-content {
        padding: 2rem 1.5rem 1.5rem;
      }

      /* Header */
      .cookie-header {
        text-align: center;
        margin-bottom: 1.5rem;
      }

      .cookie-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 4rem;
        height: 4rem;
        background: #dbeafe;
        border-radius: 50%;
        margin-bottom: 1rem;
        color: #2563eb;
      }

      .cookie-icon svg {
        width: 2rem;
        height: 2rem;
      }

      .cookie-header h2 {
        font-size: 1.25rem;
        font-weight: 700;
        color: #111827;
        margin: 0;
      }

      /* Content */
      .cookie-description {
        margin-bottom: 1.5rem;
      }

      .cookie-main-text {
        margin-bottom: 0.75rem;
        color: #111827;
        font-size: 0.875rem;
      }

      .cookie-detail-text {
        margin-bottom: 1rem;
        color: #4b5563;
        font-size: 0.875rem;
        line-height: 1.5;
      }

      /* Benefits */
      .cookie-benefits {
        background: #f9fafb;
        border-radius: 0.5rem;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .benefits-title {
        font-size: 0.75rem;
        font-weight: 500;
        color: #374151;
        margin-bottom: 0.5rem;
      }

      .benefits-list {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .benefits-list li {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.75rem;
        color: #4b5563;
        margin-bottom: 0.25rem;
      }

      .benefit-dot {
        width: 0.375rem;
        height: 0.375rem;
        background: #2563eb;
        border-radius: 50%;
        flex-shrink: 0;
      }

      .cookie-privacy-note {
        font-size: 0.75rem;
        color: #6b7280;
        margin: 0;
      }

      .privacy-link {
        color: #2563eb;
        text-decoration: underline;
        transition: color 0.2s;
      }

      .privacy-link:hover {
        color: #1d4ed8;
      }

      /* Actions */
      .cookie-actions {
        margin-bottom: 1rem;
      }

      .cookie-btn {
        width: 100%;
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 0.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        margin-bottom: 0.75rem;
      }

      .cookie-btn-primary {
        background: #2563eb;
        color: white;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .cookie-btn-primary:hover {
        background: #1d4ed8;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .cookie-btn-secondary {
        background: white;
        color: #4b5563;
        border: 1px solid #d1d5db;
      }

      .cookie-btn-secondary:hover {
        background: #f9fafb;
        color: #111827;
      }

      .cookie-btn-settings {
        background: transparent;
        color: #6b7280;
        text-decoration: underline;
        padding: 0.5rem 0;
        margin-bottom: 0;
      }

      .cookie-btn-settings:hover {
        color: #111827;
      }

      /* Trust Indicators */
      .cookie-trust {
        padding-top: 1rem;
        border-top: 1px solid #e5e7eb;
      }

      .trust-indicators {
        display: flex;
        justify-content: center;
        gap: 1rem;
      }

      .trust-item {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-size: 0.75rem;
        color: #6b7280;
      }

      .trust-icon {
        width: 0.75rem;
        height: 0.75rem;
      }

      /* Mobile Responsive */
      @media (max-width: 640px) {
        .cookie-banner-overlay {
          padding: 0.5rem;
        }

        .cookie-banner-content {
          padding: 1.5rem 1rem 1rem;
        }

        .trust-indicators {
          flex-wrap: wrap;
          gap: 0.75rem;
        }

        .cookie-icon {
          width: 3rem;
          height: 3rem;
        }

        .cookie-icon svg {
          width: 1.5rem;
          height: 1.5rem;
        }
      }

      /* Preference Center Modal */
      .cookie-preferences-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1001;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }

      .cookie-preferences-content {
        background: white;
        border-radius: 0.5rem;
        padding: 2rem;
        max-width: 500px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
      }

      .cookie-preferences-modal.show {
        display: flex;
      }
    </style>
  </head>

  <body class="bg-white text-gray-900 antialiased">
    <!-- Cookie Banner Overlay -->
    <div id="cookieBanner" class="cookie-banner-overlay">
      <div class="cookie-banner-backdrop"></div>
      <div class="cookie-banner-modal">
        <div class="cookie-banner-content">
          <!-- Header with Icon -->
          <div class="cookie-header">
            <div class="cookie-icon">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                />
              </svg>
            </div>
            <h2>🍪 We Value Your Privacy</h2>
          </div>

          <!-- Content -->
          <div class="cookie-content">
            <div class="cookie-description">
              <p class="cookie-main-text">
                <strong>Help us improve your experience!</strong>
              </p>
              <p class="cookie-detail-text">
                We use analytics to understand how you use our website so we can
                make it better for you and other visitors.
              </p>

              <!-- Benefits List -->
              <div class="cookie-benefits">
                <p class="benefits-title">What this helps us do:</p>
                <ul class="benefits-list">
                  <li>
                    <span class="benefit-dot"></span>
                    Improve website performance and user experience
                  </li>
                  <li>
                    <span class="benefit-dot"></span>
                    Understand which features you find most useful
                  </li>
                  <li>
                    <span class="benefit-dot"></span>
                    Make our content more relevant and helpful
                  </li>
                </ul>
              </div>

              <p class="cookie-privacy-note">
                We never sell your data.
                <a
                  href="{{ site.baseurl }}/privacy-policy.html"
                  class="privacy-link"
                >
                  Read our privacy policy
                </a>
              </p>
            </div>

            <!-- Action Buttons -->
            <div class="cookie-actions">
              <!-- Primary Accept Button -->
              <button
                onclick="cookieConsent.accept()"
                class="cookie-btn cookie-btn-primary"
              >
                ✨ Accept & Continue
              </button>

              <!-- Secondary Decline Button -->
              <button
                onclick="cookieConsent.decline()"
                class="cookie-btn cookie-btn-secondary"
              >
                No thanks, just browsing
              </button>

              <!-- Settings Link -->
              <button
                onclick="cookieConsent.showSettings()"
                class="cookie-btn cookie-btn-settings"
              >
                Customize Settings
              </button>
            </div>

            <!-- Trust Indicators -->
            <div class="cookie-trust">
              <div class="trust-indicators">
                <div class="trust-item">
                  <svg
                    class="trust-icon"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span>Secure</span>
                </div>
                <div class="trust-item">
                  <svg
                    class="trust-icon"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span>GDPR Compliant</span>
                </div>
                <div class="trust-item">
                  <svg
                    class="trust-icon"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <span>Anonymous</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cookie Preferences Modal -->
    <div id="cookiePreferencesModal" class="cookie-preferences-modal">
      <div class="cookie-preferences-content">
        <h3 class="text-xl font-bold mb-4">Cookie Preferences</h3>
        <div class="space-y-4">
          <div>
            <h4 class="font-semibold mb-2">Essential Cookies</h4>
            <p class="text-sm text-gray-600 mb-2">
              These cookies are necessary for the website to function and cannot
              be disabled.
            </p>
            <label class="flex items-center">
              <input type="checkbox" checked disabled class="mr-2" />
              <span class="text-sm">Always Active</span>
            </label>
          </div>

          <div>
            <h4 class="font-semibold mb-2">Analytics Cookies</h4>
            <p class="text-sm text-gray-600 mb-2">
              Help us understand how visitors interact with our website by
              collecting anonymous information.
            </p>
            <label class="flex items-center">
              <input type="checkbox" id="analyticsConsent" class="mr-2" />
              <span class="text-sm">Google Analytics</span>
            </label>
          </div>
        </div>

        <div class="flex gap-2 mt-6">
          <button
            onclick="cookieConsent.savePreferences()"
            class="cookie-btn cookie-btn-accept flex-1"
          >
            Save Preferences
          </button>
          <button
            onclick="cookieConsent.hideSettings()"
            class="cookie-btn cookie-btn-decline"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav
      class="bg-white/95 backdrop-blur-light border-b border-gray-200 sticky top-0 z-50"
    >
      <div class="max-w-7xl mx-auto container-padding">
        <div class="flex justify-between items-center h-16">
          <!-- Logo -->
          <div class="flex items-center">
            <a href="/" class="flex items-center space-x-2">
              <img
                src="{{ site.baseurl }}/assets/favicon/app.ico"
                alt="Photo Organizer - Intelligent Photo Management App Logo"
                class="w-12 h-12"
              />
              <span class="text-xl font-bold text-gray-900"
                >FlipFocus • Photo Organizer</span
              >
            </a>
          </div>

          <!-- Desktop Navigation -->
          <div class="hidden md:flex items-center space-x-8">
            <a
              href="/"
              class="nav-link {% if page.url == '/' %}active{% endif %}"
              >Home</a
            >
            <a
              href="/contact/"
              class="nav-link {% if page.url == '/contact.html' %}active{% endif %}"
              >Contact</a
            >
            <a
              href="/privacy-policy/"
              class="nav-link {% if page.url == '/privacy-policy.html' %}active{% endif %}"
              >Privacy Policy</a
            >
            <a
              href="/terms/"
              class="nav-link {% if page.url == '/terms.html' %}active{% endif %}"
              >Terms of Service</a
            >
          </div>

          <!-- Mobile menu button -->
          <div class="md:hidden">
            <button
              id="mobile-menu-button"
              class="text-gray-700 hover:text-flipfocus-600 focus:outline-none"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Navigation -->
      <div
        id="mobile-menu"
        class="md:hidden hidden bg-white border-t border-gray-200"
      >
        <div class="container-padding py-4 space-y-2">
          <a
            href="/"
            class="block py-2 nav-link {% if page.url == '/' %}active{% endif %}"
            >Home</a
          >
          <a
            href="/contact/"
            class="block py-2 nav-link {% if page.url == '/contact.html' %}active{% endif %}"
            >Contact</a
          >
          <a
            href="/privacy-policy/"
            class="block py-2 nav-link {% if page.url == '/privacy-policy.html' %}active{% endif %}"
            >Privacy Policy</a
          >
          <a
            href="/terms/"
            class="block py-2 nav-link {% if page.url == '/terms.html' %}active{% endif %}"
            >Terms of Service</a
          >
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main>{{ content }}</main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white">
      <div class="max-w-7xl mx-auto container-padding section-padding">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <!-- Company Info -->
          <div class="md:col-span-2">
            <div class="flex items-center space-x-2 mb-4">
              <div
                class="w-8 h-8 bg-flipfocus-600 rounded-lg flex items-center justify-center"
              >
                <span class="text-white font-bold text-sm">F</span>
              </div>
              <span class="text-xl font-bold">FlipFocus</span>
            </div>
            <p class="text-gray-400 mb-4 max-w-md">
              Privacy-first utility apps for Mac and Windows. Offline file
              management tools with one-time purchase and lifetime updates.
            </p>
            <div class="flex space-x-4">
              <a
                href="https://github.com/{{ site.social.github }}"
                class="text-gray-400 hover:text-white transition-colors"
                aria-label="GitHub"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                  />
                </svg>
              </a>
              {% if site.social.twitter %}
              <a
                href="https://twitter.com/{{ site.social.twitter }}"
                class="text-gray-400 hover:text-white transition-colors"
                aria-label="Twitter"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                  />
                </svg>
              </a>
              {% endif %}
            </div>
          </div>

          <!-- Products -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Products</h3>
            <ul class="space-y-2">
              <li>
                <a
                  href="{{ site.products.photo_organizer.url }}"
                  class="text-gray-400 hover:text-white transition-colors"
                  >{{ site.products.photo_organizer.name }}</a
                >
              </li>
              <li>
                <a
                  href="{{ site.products.duplicates_scanner.url }}"
                  class="text-gray-400 hover:text-white transition-colors"
                  >{{ site.products.duplicates_scanner.name }}</a
                >
              </li>
              <li>
                <a
                  href="{{ site.products.all.url }}"
                  class="text-gray-400 hover:text-white transition-colors"
                  >{{ site.products.all.name }}</a
                >
              </li>
            </ul>
          </div>

          <!-- Support -->
          <div>
            <h3 class="text-lg font-semibold mb-4">Support</h3>
            <ul class="space-y-2">
              <li>
                <a
                  href="/contact/"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Contact</a
                >
              </li>
              <li>
                <a
                  href="/privacy-policy/"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Privacy Policy</a
                >
              </li>
              <li>
                <a
                  href="/terms/"
                  class="text-gray-400 hover:text-white transition-colors"
                  >Terms of Service</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div
          class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"
        >
          <p>
            &copy; {{ 'now' | date: '%Y' }} {{ site.company.founder }}. All
            rights reserved.
          </p>
          <p class="mt-2">
            Developed by
            <a
              href="https://www.mcvanhassel.com"
              class="text-flipfocus-400 hover:text-flipfocus-300"
              >Mcvanhassel Web Development</a
            >
          </p>
        </div>
      </div>
    </footer>

    <script>
      // Extend cookie consent functionality
      window.cookieConsent = Object.assign(window.cookieConsent || {}, {
        init: function () {
          // Show banner if no consent decision has been made
          if (!localStorage.getItem("ga-consent")) {
            setTimeout(() => {
              this.showBanner();
            }, 1000);
          }

          // Update analytics checkbox based on current consent
          const checkbox = document.getElementById("analyticsConsent");
          if (checkbox) {
            checkbox.checked = this.hasConsent();
          }
        },

        showBanner: function () {
          document.getElementById("cookieBanner").classList.add("show");
          this.disableBodyScroll();
        },

        hideBanner: function () {
          document.getElementById("cookieBanner").classList.remove("show");
          this.enableBodyScroll();
        },

        disableBodyScroll: function () {
          document.body.style.overflow = "hidden";
        },

        enableBodyScroll: function () {
          document.body.style.overflow = "";
        },

        accept: function () {
          this.setConsent(true);
          this.hideBanner();
        },

        decline: function () {
          this.setConsent(false);
          this.hideBanner();
        },

        showSettings: function () {
          // Update checkbox state
          const checkbox = document.getElementById("analyticsConsent");
          if (checkbox) {
            checkbox.checked = this.hasConsent();
          }
          document
            .getElementById("cookiePreferencesModal")
            .classList.add("show");
        },

        hideSettings: function () {
          document
            .getElementById("cookiePreferencesModal")
            .classList.remove("show");
        },

        savePreferences: function () {
          const analyticsCheckbox = document.getElementById("analyticsConsent");
          const analyticsConsent = analyticsCheckbox.checked;

          this.setConsent(analyticsConsent);
          this.hideSettings();
          this.hideBanner();
        },

        // Function to show preferences (for privacy policy link)
        showPreferences: function () {
          this.showSettings();
        },
      });

      // Initialize on page load
      document.addEventListener("DOMContentLoaded", function () {
        window.cookieConsent.init();
      });

      // Close modal when clicking outside
      document
        .getElementById("cookiePreferencesModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            window.cookieConsent.hideSettings();
          }
        });

      // Close cookie banner when clicking on backdrop
      document.addEventListener("click", function (e) {
        if (e.target.classList.contains("cookie-banner-backdrop")) {
          // Optionally allow closing by clicking backdrop - uncomment next line if desired
          // window.cookieConsent.decline();
        }
      });

      // Smooth scroll for hash links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(
            this.getAttribute("href").substring(1)
          );
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
            });
          }
        });
      });

      document
        .getElementById("mobile-menu-button")
        .addEventListener("click", function () {
          const menu = document.getElementById("mobile-menu");
          menu.classList.toggle("hidden");
        });

      // FAQ Toggle Functionality
      window.toggleFAQ = function (button) {
        const answer = button.nextElementSibling;
        const icon = button.querySelector(".faq-icon");

        if (answer.classList.contains("hidden")) {
          // Open this FAQ
          answer.classList.remove("hidden");
          icon.style.transform = "rotate(180deg)";

          // Optional: Close other FAQs (uncomment for accordion behavior)
          // document.querySelectorAll('.faq-answer:not(.hidden)').forEach(otherAnswer => {
          //   if (otherAnswer !== answer) {
          //     otherAnswer.classList.add('hidden');
          //     const otherIcon = otherAnswer.previousElementSibling.querySelector('.faq-icon');
          //     otherIcon.style.transform = 'rotate(0deg)';
          //   }
          // });
        } else {
          // Close this FAQ
          answer.classList.add("hidden");
          icon.style.transform = "rotate(0deg)";
        }
      };

      // Image Modal Functionality
      let currentImageIndex = 0;

      window.openImageModal = function (src, title, description) {
        // Find the index of the current image
        const screenshots = window.screenshotsData || [];
        currentImageIndex = screenshots.findIndex(
          (screenshot) => screenshot.src === src
        );

        // Set modal content
        document.getElementById("modalImage").src = src;
        document.getElementById("modalImage").alt = title + " - " + description;
        document.getElementById("modalTitle").textContent = title;
        document.getElementById("modalDescription").textContent = description;

        // Show modal
        document.getElementById("imageModal").classList.remove("hidden");
        document.body.style.overflow = "hidden";

        // Track analytics event
        if (typeof trackEvent !== "undefined") {
          trackEvent("view_screenshot", {
            event_category: "Engagement",
            event_label: title,
            screenshot_index: currentImageIndex + 1,
          });
        }
      };

      window.closeImageModal = function () {
        document.getElementById("imageModal").classList.add("hidden");
        document.body.style.overflow = "";
      };

      window.nextImage = function () {
        const screenshots = window.screenshotsData || [];
        if (screenshots.length === 0) return;

        currentImageIndex = (currentImageIndex + 1) % screenshots.length;
        const screenshot = screenshots[currentImageIndex];
        window.openImageModal(
          screenshot.src,
          screenshot.title,
          screenshot.description
        );
      };

      window.previousImage = function () {
        const screenshots = window.screenshotsData || [];
        if (screenshots.length === 0) return;

        currentImageIndex =
          (currentImageIndex - 1 + screenshots.length) % screenshots.length;
        const screenshot = screenshots[currentImageIndex];
        window.openImageModal(
          screenshot.src,
          screenshot.title,
          screenshot.description
        );
      };

      // Close modal on escape key
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") {
          window.closeImageModal();
        }
        if (e.key === "ArrowRight") {
          window.nextImage();
        }
        if (e.key === "ArrowLeft") {
          window.previousImage();
        }
      });

      // Close modal when clicking outside the image
      document
        .getElementById("imageModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            window.closeImageModal();
          }
        });
    </script>

    <!-- Screenshots data for modal functionality -->
    <script>
      // Define screenshots data from Jekyll config
      window.screenshotsData = [
        {% for screenshot in site.screenshots %}
        {
          src: "{{ screenshot.src }}",
          title: "{{ screenshot.title }}",
          description: "{{ screenshot.description }}"
        }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ];
    </script>
  </body>
</html>
